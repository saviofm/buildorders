/* eslint-disable no-console */

function getMessage(errorText, { error, help } = {}) {
    let message = errorText ? errorText : '';
    if (error) {
        message += '\n' + (
            error.response?.data?.message           // response body == error
            || error.response?.data?.error?.message // response body == { error }
            || error.message                        // no response attached
        );
        if (process.env.DEBUG && error.stack) {
            message += '\n' + error.stack;
        }
    }
    if (typeof help === 'string') {
        message += require('../../../bin/help').formatHelp(help);
    }
    return message;
}

module.exports = {
    getMessage
};
