const { join } = require('path')
const cds = require('../../../cds')
const { read } = cds.utils
const { readProject } = require('../../util/projectReader')
const { mergeJSON } = require('../../util/merge')

module.exports = class SQLiteTemplate extends require('../templateBase') {

    async run() {
      const project = await readProject(this.options)
      const { configFile } = project
      project.shortcut = !(await read(configFile)).cds?.requires?.db?.kind
      await mergeJSON(configFile, join(__dirname, 'files', `package.json.hbs`), project)
    }
}
