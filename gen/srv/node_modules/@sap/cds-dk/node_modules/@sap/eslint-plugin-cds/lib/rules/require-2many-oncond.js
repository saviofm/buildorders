module.exports = {
  meta: {
    schema: [{/* to avoid deprecation warning for ESLint 9 */}],
    docs: {
      description: 'Foreign key information of a `TO MANY` relationship must be defined within the target and specified in an `ON` condition.',
      recommended: true
    },
    type: 'problem'
  },
  create: function (context) {
    return { element: check2manyOncond }

    function check2manyOncond (e) {
      if (e.is2many && !e.on && typeof e.target === 'string') {
        context.report({
          message: `You must provide an \`ON\` condition for \`TO MANY\` relationship '${e.name}'.`,
          node: context.getNode(e)
        })
      }
    }
  }
}
