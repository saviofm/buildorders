namespace cds.xt;

entity Tenants {
    key ID       : String;
        metadata : String;
}

entity Jobs {
    key ID        : String; // REVISIT: cuid from cds/common?
        status    : Status default #RUNNING;
        op        : String;
        error     : String;
        result    : LargeString;
        createdAt : Timestamp;
        tasks     : Composition of many Tasks on tasks.job = $self;
}

entity Tasks {
    key job       : Association to Jobs;
    key ID        : String; // REVISIT: cuid from cds/common?
        tenant    : String(100);
        op        : String;
        error     : String;
        status    : Status default #RUNNING;
        createdAt : Timestamp;
        database  : String;
}

type Status : String enum {
    QUEUED;
    RUNNING;
    FINISHED;
    FAILED;
}
